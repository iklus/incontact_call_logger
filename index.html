<!DOCTYPE html>
<html>
<title>InContact Call Logger</title>
<body>

<h1>This InContact Call Logger testing web app</h1>
<p>This is a paragraph.</p>

<button onclick="redirectToInContactAuth()">Test Auth</button>

</body>
<script>
    var application = "InContact_API_Test";
    var vendor = "Ivan_Klus";
    //var client_id = window.btoa(application + "@" + vendor);
    var client_id = "InContact_API_Test@Ivan_Klus";

    var implicitUri = "https://api.incontact.com/InContactAuthorizationServer/Authenticate";
    var token_scope = "RealTimeApi AdminApi AgentApi ReportingApi";
    var redirect_uri = "http://ivankl.us/incontact_call_logger";
    var state_object = "myState";

    function redirectToInContactAuth() {
        var url = implicitUri;
        url = url + "?state=" + state_object;
        url = url + "&response_type=token";
        url = url + "&client_id=" + encodeURIComponent(client_id);
        url = url + "&redirect_uri=" + encodeURIComponent(redirect_uri);
        url = url + "&scope=" + encodeURIComponent(token_scope);
        console.log(url);
        window.location.href = url;
    }

    var urlParams;
    (window.onpopstate = function () {
        var match,
            pl     = /\+/g,  // Regex for replacing addition symbol with a space
            search = /([^&=]+)=?([^&]*)/g,
            decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
            query  = window.location.search.substring(1);
            urlParams = {};
        while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);
    })();
    console.log(urlParams);


    var request = new XMLHttpRequest();
    request.open('GET', urlParams[resource_server_base_uri])


    console.log("Hello JavaScript!");
</script>
</html>